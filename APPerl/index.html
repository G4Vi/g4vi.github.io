<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=1024">
<title>Actually Portable Perl | Computoid</title>
<style>
/* Styling heavily inspired from https://justine.lol */
html {
  font-family: sans-serif;
  font-size: 14pt;
}

body {
  max-width: 960px;
  min-width: 960px;
  margin: 0 auto 0 auto;
  margin-top: 2em;
  background: white;
}

h1 {
  margin: 0;
  padding-top: .5em;
  padding-bottom: .5em;
}

.content {
  padding-left: 1.5em;
  padding-right: 1.5em;
}

footer {
  padding-bottom: 1em;
}

li {
  padding: .2em 0;
}

header {
  display: block;
}

header a {
  color: black;
}

#sitename {
  display: inline;
}
</style>
</head>
<body>
<div class="content">
<header><h2 id="sitename"><a href="../">Computoid</a></h2> | <a href="../about/">About</a> | <a href="../APPerl/">APPerl</a></header>
<h2 id="NAME">NAME</h2>
<p>Actually Portable Perl (APPerl)</p>

<h2 id="DESCRIPTION">DESCRIPTION</h2>
<p>Actually Portable Perl (APPerl) is a distribution of Perl that runs on
  several x86_64 operating systems (most Unix-like and Windows) via the same binary. It builds to a
  single binary with perl modules packed inside of it.</p>

<p>Cross-platform, single binary, standalone Perl applications can be made
  by building custom versions of APPerl, with and without compiling
  Perl from scratch, so it can be used an alternative to <a href="https://metacpan.org/pod/pp">PAR::Packer</a>.
  APPerl could also easily be added to development SDKs,
  carried on your USB drive, or just allow you to run the exact same perl
  on all your PCs multiple computers.</p>

<p>Information on the creation of APPerl can be found in this <a href="../posts/Perl-is-Actually-Portable.html"><b>blogpost</b></a>.</p>

<p>Actually Portable Perl was presented at TPRC 2024: <a href="https://www.youtube.com/watch?v=H3dITR0np54">Video</a> | <a href="Actually Portable Perl.pdf">Slides</a></p>

<h2 id="FEATURES">FEATURES</h2>
<ul>
  <li>Runs on six operating systems with the same binary!</li>
  <li>Full build of Perl 5, perl modules, C extensions, and all under 24 MiB, Small build under 5 MiB</li>
  <li>Polygot binary format is also a ZIP file allowing for easy inspection and modification with standard tools</li>
  <li>Scripts can be embedded and ran from inside the executable:<br><code>./perl.com /zip/bin/perldoc Perl::Dist::APPerl</code></li>
  <li><code>argv[0]</code> script execution allows for easy creation of single file applications:<br><code>ln -s perl.com perldoc.com && ./perldoc.com Perl::Dist::APPerl</code></li>
  <li><code>apperlm</code> tool enables building custom APPerl versions and applications with and without building Perl from source</li>
</ul>

<h2 id="RELEASES">RELEASES</h2>
<h3>Latest Release Builds</h3>
<ul>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/latest/download/perl.com"><code>perl.com</code></a> - The full release of APPerl, perl v5.36.3, built with all default modules and C extensions.</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/latest/download/perl-small.com"><code>perl-small.com</code></a> - Slimmed down build of APPerl, perl v5.36.3, no perldoc.</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/latest/download/perl-vista.com"><code>perl-vista.com</code></a> - Full APPerl, perl v5.36.3, with Vista/7 support from a Cosmo fork.</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/latest/download/perl-small-vista.com"><code>perl-small-vista.com</code></a> - Small APPerl, perl v5.36.3, with Vista/7 support from a Cosmo fork.</li>
</ul>
<p><code>apperlm</code> (APPerl Manager) is available on CPAN: <a href="https://metacpan.org/pod/Perl::Dist::APPerl">Perl::Dist::APPerl</a><br>
  <code>apperlm</code> is also packaged inside of full builds
  of APPerl for convenience; see <a href="https://github.com/G4Vi/Perl-Dist-APPerl/blob/master/README.md#BOOTSTRAPPING">BOOTSTRAPPING</a>.</p>
<details>
  <summary><h3 style="display:inline">Releases <small><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/latest">(on GitHub)</a></small></h3></summary>
<ul>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.6.1">v0.6.1</a> - Fix bootstrapped builds</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.6.0">v0.6.0</a> - Build with cosmocc 3.3.10, fix some extensions not being linked with install_modules</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.5.0">v0.5.0</a> - Revert updating cosmo, build with perl 5.36.3</li>
  <li><s><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.4.0">v0.4.0</a> - Build full and small targets with cosmo 3.0.2 and perl 5.36.1</s></li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.3.0">v0.3.0</a> - Added installing CPAN distributions from disk, more script execution shortcuts</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.2.1">v0.2.1</a> - Remove dependency on Env module.</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.2.0">v0.2.0</a> - Enable cross-platform builds of `nobuild` configs (even on Windows).</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.1.1">v0.1.1</a> - Fix 5.10 support and broken pod link, thanks to MJGARDNER <a href="https://github.com/G4Vi/Perl-Dist-APPerl/pull/1">GH#1</a></li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.1.0">v0.1.0</a> - Fix issues with Time-HiRes Configure. Pin Perl version to configs.</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.0.3">v0.0.3</a> / <a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.0.4">v0.0.4</a> - Add leading '-' support to config parsing to remove items from an
    existing set.</li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.0.2">v0.0.2 - add small builds</a></li>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl/releases/tag/v0.0.1">v0.0.1 - first release</a></li>
</ul>
</details>

<h2 id="USAGE NOTES">USAGE NOTES</h2>
<h3>unix-like notes and troubleshooting</h3>
<p>You must make the binary executable before it can be ran:<br><code>chmod +x perl.com</code></p>
<p>Actually Portable Executables(APEs) such as APPerl, must be run from a Thompson Shell compatible shell such as <code>bash</code>. On some Linux environments (such as WSL), you may need to fiddle with <code>binfmt_misc</code>. <a href="https://github.com/jart/cosmopolitan#getting-started">Cosmopolitan Libc README</a></p>
<p>APEs automatically extract and install the <a href="https://justine.lol/apeloader/">APE Loader</a> if it is not found. Usually, the APE Loader is installed to <code>$HOME/.ape</code>. In order to run an APE, the APE Loader must be executable (not stored on a <code>noexec</code> mount). See <a href="https://justine.lol/apeloader/">APE Loader</a>.</p>
<p>APEs can sidestep the APE loader by converting to the native binary format (e.g. ELF, Mach-O):<br><code>cp perl.com perl && ./perl --assimilate</code> . Of course, this makes them no longer APEs.</p>
<h3>Running under pledge</h3>
<p>If running third-party binaries makes you nervous, APPerl can be ran with <a href="https://justine.lol/pledge/">pledge</a> under Linux (<code>pledge.com</code> can be built from the source in the Cosmopolitan Libc repo).</p>
<code>cp perl.com perl</code><br>
<code>./perl --assimilate</code><br>
<code>./pledge.com -p 'stdio rpath tty' ./perl -e 'print("hello world\n");'</code><br>
<code>./pledge.com -p 'stdio rpath tty cpath proc exec prot_exec tmppath' ./perl /zip/bin/perldoc Perl::Dist::APPerl</code>

<h2 id="DOCUMENTATION, SOURCE CODE, AND SUPPORT">DOCUMENTATION, SOURCE CODE, AND SUPPORT</a></h2>
<ul>
  <li><a href="https://metacpan.org/pod/Perl::Dist::APPerl">Perl::Dist::APPerl documentation</a> - <small>APPerl usage info, <code>apperlm</code> documentation, instructions on building APPerl from source, and tutorials on creating custom applications and APPerl builds with and without compiling Perl from source.</small>
  <li><a href="https://github.com/G4Vi/Perl-Dist-APPerl">Perl::Dist::APPerl repository</a> - <small><code>apperlm</code> source code</small></li>
  <li><a href="https://github.com/G4Vi/perl5">perl5 fork for the Cosmopolitan Libc</a> - <small>perl5 patched to support building with the Cosmopolitan Libc, see <a href="https://github.com/G4Vi/perl5/blob/cosmo/README.cosmo">perlcosmo</a></small></li>
  <li><a href="https://github.com/jart/cosmopolitan">Cosmopolitan Libc</a> - <small>build system for producing Actually Portable Executables with syscall polyfills</small>
</ul>
<p>Support and bug reports should be filed as issues at the Perl::Dist::APPerl repo. Pull Requests are welcome at the repos.
  The Cosmopolitan Libc is a third-party project, be sure to read the guidelines there if contributing there.</p>
<p>Fixes to the cosmo platform in the perl source should be done on top of the <code>cosmo</code> branch. Improvements to APPerl, but unfit to be merged into official perl should be done
  on top of the <code>cosmo-apperl</code> branch. Ideally someday we'll get the cosmo platform merged into official perl.</p>

<h2 id="COMMUNITY">COMMUNITY</h2>
<p>APPerl shares the <a href="https://discord.gg/ZGHZjQQyFS">Cosmopolitan Libc discord</a>.</p>

<h2 id="ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</h2>
<p>
  The <a href="https://github.com/jart/cosmopolitan">Cosmopolitan Libc</a>
    contributors, especially <a href="https://justine.lol/">Justine Tunney</a>
    and <a href="https://ahgamut.github.io">Gautham Venkatasubramanian</a>.
    APPerl wouldn't be possible without Actually Portable Executables and polyfills of several Linux and POSIX APIs for other
    platforms. Gautham's <a href="https://ahgamut.github.io/2021/07/13/ape-python/">Python port</a> inspired this project.
</p>

<h2 id="AUTHOR">AUTHOR</h2>
  <p>Gavin Hayes - my email and profiles are in the footer.</p>

<h2 id="LICENSE AND COPYRIGHT">LICENSE AND COPYRIGHT</h2>
  <p>This software is copyright (c) 2022 by Gavin Hayes.</p>

  <p> This is free software; you can redistribute it and/or modify it under
    the same terms as the Perl 5 programming language system itself.</p>

<footer>
--<br>
Gavin Hayes | gavin [at] computoid dawt com | <a href="https://github.com/G4Vi">GitHub</a> | <a href="https://metacpan.org/author/GAHAYES">CPAN</a>
<br>
</footer>
</div>
</body>
</html>